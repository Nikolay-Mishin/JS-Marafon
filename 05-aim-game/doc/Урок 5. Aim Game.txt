и так ребят всем привет в пятый день

марафона по java script и сегодня мы

будем делать наиболее сложный проект и

из этого марафона но при этом на мой

взгляд наиболее впечатляющий эта игра

полноценная называется а им тренинг и

она подойдет для тех кто хочет повысить

свою меткость возможно перед онлайн

играми значит как это выглядит с точки

зрения разработки и проекта у нас есть

главный экран и мы можем нажать кнопочку

начать игру я нажимаю и у нас появляются

следующий экран где мы должны выбрать

время ну допустим я выберу 20 секунд и

вот у нас игровое поле

идет таймер то есть мои много таймеров

смотрим и в поле у нас генерируются

различные точки по которым мы должны

попадать значит давайте пока чуть-чуть

поиграю

посмотрим насколько я метки с touchpad

своим я работаю без мышки так таймер

дошел до конца смотрим исчезает время и

появляется счет вот такую игру мы должны

с вами сегодня написать и на самом деле

мы на примере этого приложения

рассмотрим огромное количество различных

классных элементов внутри java-script

как работать с динамик и как создавать

вот такие экраны да и в общем как

рандомно выбирать позицию размер и так

далее как делать таймер и в общем очень

много чего здесь будет подобные вещи они

крайне важны при разработки на java

script при различных проектов на

фрилансе общем очень полезный контент

поэтому сразу же давайте приступим к

разработке и и будет здесь довольно-таки

много по традиция вы скачиваете исходный

код к данному приложению потому что

стилем и html я уже заготовил чтобы мы

не тратили на них время чтобы мы смогли

сфокусироваться на непосредственно

разработки на java script но тем не

менее я прокомментирую подробно что

здесь происходит с точки зрения html

все довольно таки просто у нас есть

несколько дивов у которых есть класс

screen то есть к

каждый из этих дивов он представляет

себя определенный экран на первом экране

у нас есть заголовок и есть кнопочка до

которой мы будем обрабатывать

второй экран он содержит себе список из

трех кнопок тоже будем это обрабатывать

и вот еще один экран который содержит

себе время плюс поля и чтимой довольно

таки просто что касается с с то тут я

подключил шрифты значит как мы

добиваемся того что у нас появляются

различные экраны сам по себе экран у нас

по высоте 100 процентов и по точнее по

ширине и по высоте и для того чтобы не

было видно других экранов мы ставим

overflow кида

остальные элементы они здесь не

интересны потому что здесь нет ничего

сверхестественного можете посмотреть

просто определенная стилистика чтобы

было это симпатично единственное что я

хотел бы прокомментировать это вот этот

класс то есть когда мы добавляем close

up для какого-то скрина я у него

происходит следующая маджин топ минус

ставишь то есть он как бы улетает наверх

и учитывая что мы делаем транзишен

помочь жену а то появляется эта анимация

вот то есть анимация сделана через css

нас в данном случае будет интересовать

непосредственно скрипт поэтому давайте

его создавать значит source of . джесс

его у меня еще нет

поэтому я создаю об . джаз

и давайте запустим то приложение которое

есть у нас сейчас

апнул их life сервер

да это мы можем закрыть ну и давайте я

разобью его каким-то образом

как об

можем и разрабатывать и сразу же

смотреть нажимаю команд б выбираю

менюшку

и переходим в об . джед первое что мы

должны сделать для данной игры мы должны

обработать кнопочку начать игру то есть

клик по ней и передайте нам необходимо

получить ее из

дом дерево давайте зададим ей

какой-нибудь айдишник допустим старт

сохраняю здесь на всякий случай добавлю

комментарий про то что с помощью классов

мы добавляем стилистику с помощью техник

of мы добавляем какие-то данные которые

до пример позволяют собирать эти

элементы в java script и здесь я создам

константу

который назову например старт btm и мы

уже умеем получать их из dom-дерева это

документ говоря selector и

а и у него старт значит давайте добавим

простушку события

старт бтр event list мир мы слушаем

события клик и здесь давайте я сразу же

добавлю такой кубик функцию что нам

необходимо сделать когда мы кликаем на

начать игру во первых давайте сейчас я

продемонстрирую чуть подробнее

вот обратите внимание сейчас на адресную

строчку когда я нажимаю начать тут

появляется вот этот хэш потому что в

шлейфе здесь прописан хэш мы не хотим

чтобы он добавлялся поэтому в первую

очередь здесь

мы получим объект event

и отменим поведение по умолчанию event-ы

вызываем метод prevent дефолт макет

теперь если мы удалим хэш я нажимаю

начать игру то как видите ничего не

происходит да потому что с помощью java

script мой отмеряет поведения дальше нам

необходимо поработать с различными

экранами поэтому я их все заберу в

константу screens с помощью документ

их несколько поэтому и пишу клэри я

селектор

. карен и для того же

бы значит показать следующий экран я

обращаюсь к screens это у нас массив он

индекса начинаются с нуля поэтому я

обращаюсь к нашему первому экрану и

говорю что его класс лист

пожалуйста добавив close-up теперь когда

нажимаю начать игру

ничего не произошло давайте посмотрим

почему посмотреть код есть какая-то

ошибка а здесь написано о том что

контрит property класс list of an defort

это происходит из-за того что вот этот

элемент он является анды faint и я знаю

почему потому что мы должны забрать

класс screen

когда я поправляю нажимаю начать мы

видим необходимую нам анимацию ok с этим

мы разобрались

двигаемся дальше значит нас теперь есть

список из кнопок

где мы можем выбрать определенное время

значит в этом проекте я буду

пользоваться другим подходом для

добавления событий то есть они будут

добавлять слушатель для каждой из этих

кнопок

я добавлю один слушатель на сам список

то есть для него я добавлю айдишник

допустим также назову его

time лист

изначально

необходимо его получить значит const

once допустим придавайте выше time лист

но документ к вере selector и

айдишник time лист теперь мы для него

с помощью

этот ивент весне ра добавляем событие

клик и здесь получаем ивент в принципе

здесь пока ничего нового нет давайте

посмотрим как мы можем обойтись только с

одним слушателям то есть по факту я

добавил слушатель на весь блок списка

нам необходимо слушать событие только по

одной кнопочки забегая немного вперед

скажу что концепт называется

делегировании событий подробнее мы

рассказываем про механизм в полном курсе

сейчас же просто покажу механику как это

работает нам необходимо здесь добавить

проверку

из простить что если event таргет то

есть тот элемент по которому мы кликнули

класс лист дальше у класс лист мы уже

знаем что есть методы

от rim off у него также есть метод

контент который проверяет

а есть ли у этого элемента определенный

класс какой классности нас интересует

заинтересует class time bt то есть если

вы элементы есть class time btn то это

означает что это есть кнопка да и тогда

мы в консоли например на можем

посмотреть на ивент торги на давать в

консоли

открою консоль так тут есть небольшие

неполадки с версткой

чуть-чуть их опустим значит нажимаю на

кнопочку видите отрабатывают на

получение 20 если клику между кнопок то

ничего не происходит

супер значит что я хочу сделать дальше

мне нужно определить а

какую кнопку я нажал и сколько времени

да мне нужно поместить в нашу игру для

этого я создам помощью ключевого слова

лет переменную time и пусть по умолчанию

будет равняться нулю

дальше в html я добавлю для каждой из

кнопок специальный атрибут

с префиксом дата и допустим значению ним

будет time для 10 секунд это будет

значение 10

отчет для

очки с двадцатью секундами это будет

значение 20

и здесь к следствие 30 то есть дата

атрибута мы можем добавлять для любых

элементов называть их мы можем как

угодно и они служат для того чтобы нести

в себе какие-то данные и теперь я хочу

когда у меня есть конкретная кнопочка

получить значение его дата атрибута

значит все для этого я могу петь

написать то есть эта кнопка вызвать

метод get и трибьют и получить значение

нужного нам атрибута do the time кликаю

на 10 есть мы получаем 10 20 30 и так

далее но сразу же исправим некоторую

ошибку потому что эта строчка да если мы

допустим хотим получить здесь число

отведите он фиолетовый таким цветом

подсвечиваются именно строчки поэтому

нам здесь необходимо получить именно

число так что вот это значение которое

мы получили я беру и оборачиваю в

функцию который называется парс int и

все то что мы здесь получили я помещаю в

переменную time да то есть таким образом

мы как бы и выбрали время после

того мы можем в принципе начать нашу

игру здесь я вызову функцию start game

пока этой функции у нас нет поэтому

думаю что это ее создать faction

start game и первое что мы сделаем в

этой функции мы изменим экран то есть по

аналогии того как мы делали до этого

единственное что так мы точно знаю что

мы работаем сейчас на втором экране то

мы обращаемся здесь к первому индексу да

и теперь допустим я нажимаю на 20 секунд

вот мы получается остаемся на третьем

экране

дальше значит мы выбрали какое-то время

и нам необходимо это время положить в

данное место для того чтобы обозначить

пользователю сколько ему осталось значит

давайте найдем вот у нас есть span у

него есть айди time давайте его получим

и а называют time

l и получила с помощью document к вере

селектор айди time сюда мы можем

поместить с помощью свойства и нарыть

темы строчку обратите внимание что есть

запишу обратные кавычки пусть он 0 0

двоеточие и сюда подставляю time который

мы выбрали обновляю страницу и сразу же

давайте чтобы мы каждый раз не начинали

игру с первого экрана сейчас мы сделаем

небольшой хак во-первых временно в

яндекс html первый экран и я сразу же

сюда добавлю close up для второго экрана

тоже добавлю close-up чтобы мы сразу же

оказывались на третьем экране сохраню

перемены time допустим я буду задавать

здесь значение 27

и временно то есть это у нас я напишу

комментарий

дипак я вызываю самостоятельно функцию

start game

кстати так подумал что лучше вот эту

строчку перенести в функцию time листа

чтобы лишний раз не добавлялся класс

зато есть оставим все в таком виде

отлично в первую часть мы закончили

теперь поговорим про то как поработать с

таймерами значит когда и наша игра

стартует

мы можем задать таймер с помощью функции

сет интервал функция сет интервал она

будет через каждый промежуток времени

которые мы зададим выполнять какую-то

функцию другое

например мы хотим каждую секунду менять

значение времени да то есть я назову

функцию

decrease time

эту функцию я буду складывать его

интервал и вызывать этот интервал я буду

каждую секунду то есть это от 1000

миллисекунд

что мы делаем в decrease тайме здесь я

счас там переменную corinth то есть

текущее время и каждую секунду нам

необходимо уменьшить

то время которое мы выбрали для игры

здесь я напишу минус минус time да это

число поэтому у него есть такой оператор

в java script

ну и после этого в принципе я могу

сделать то же самое что и до этого

давайте посмотрим отлично таймер у нас

идет как видите это работает довольно

таки просто но есть один нюанс сейчас

покажу смотрите внимательно время

когда у нас всего лишь одна цифра по

времени то выглядит это не очень красиво

а то есть я бы хотел сюда добавлять еще

и нолик

про эту ситуацию мы поговорим отдельно

то есть давайте здесь запишем их если

corrente у нас меньше десяти да то есть

в нем одна цифра

то тогда я просто напишу что corinth у

нас равняется добавлю нолик сюда 0 плюс

corinth можем так написать давайте

посмотрим на всякий случай давайте чтобы

сейчас много не ждать я задам 11 по

умолчанию

все работает хочу написать ни одну

точнее одно helper функцию для того

чтобы каждый раз этот код не дублировать

то есть видеть что функция на одинаковый

просто он вызывается с разными

параметрами это функция зову ее set time

значит туда мы принимаем некоторые в

илью и здесь я вызову

ну set time to значением corinth здесь я

вызываю функцию set time со значением

time да все так же работает но теперь у

нас на мой взгляд выглядит это куда

красивее да и вообще подобные

повторяющиеся элементы лучше выносить в

функция так теперь думаю что нужно

поработать над за зиму то времени значит

здесь давайте спросим

если time равняется нулю это означает

что время у нас уже вышла и больше игру

мы не можем продолжать а иначе если

время еще больше нуля то тогда мы делаем

этот функционал то ты переношу сюда и

здесь я вызову функцию финиш game пока у

меня ее нет я создам отдельно

function финиш game и чуть позже мы ее

обижу

давайте проверим что все это работает

чем ся конца таймером

все видите думали о

шоу и дальше

происходит да то есть это то что нам

нужно было и что же мы опишем

саму функцию финиш game

супер значит теперь нам необходимо

добавлять рандомные кружки в это поле и

в общем-то обрабатывать клики по ним

для этого я создам еще одну отдельную

функцию которая назову греет рэндом

широко и в принципе здесь мы будем

пользоваться уже теми знаниями которые у

нас есть то есть для начала я создам на

переменную с ираком

с помощью документ

греет элемент и это у нас div

давайте зададим это мастер-класс таком

класс list от i в css он так у нас

называется circle

дальше значит у нас этот кружочек

необходимо поместить в div с

айди бот для начала нам необходимо

получить

доску документ кларе селектор борт и как

только значит мы создали этот кружок мы

говорим что board and

цирку теперь этот метод мы вызовем когда

мы стартуем

игру да то есть например вот здесь но

при этом кружочка все еще нет да но хотя

если мы посмотрим на исходный код

на доску то вот он наш терку где-то

находится но мы его не видим потому что

видеть у него размер 600

то есть размер мы также сами выбираем и

поэтому необходимо его задать

например 40 бы

здесь оперировать через стиля style

будет равно ну например пусть будет 15

только мы здесь не можем задавать число

здесь нужно строчка

15 пикселей и то же самое касается

например высоты

теперь мы видим что кружочку нас есть но

я хочу написать функцию который будет

случайно получать нам идти размерности в

том диапазоне котором мы зададим для

этого я создам еще одну функцию который

называл например

[музыка]

get random number и в эту функцию мы

будем получать два параметра

минимальное значение и максимальное

значение мы будем получать это следующим

образом мы обратимся к мисс рейн дам и

умножим это на разницу между

максимальным значением и минимальным

значением и приложим сюда

минимальное значение тут такой алгоритм

дальше это все нам необходимо обернуть в

круглые скобки потому что дальше нам

необходимо это округлить с помощью move

around

принципе теперь нам нужно это вернуть

давайте проверим как работает эта

функция get рэндом нам бы допустим в

диапазоне от 1 до

ну пусть будет 10 8 2435

ну судя по всему работает на то есть

алгоритмы написали правильно поэтому

после того как мы создали кружочек здесь

я создал переменную сайт так как размер

ширины и высоты для нашего кружка будет

одинаковый и сайт я получу с помощью

функции геттером то нам было допустим от

10 до

скажем 60 пикселей теперь

вместо того

чтобы задавать фиксированное значение

сюда мы будем задавать тут

мир которыми получили плюс пикселя

в принципе это можно скопировать и вот

наш кружочек

как видите каждый раз когда обновляю

страницу он у нас разного размера

он выглядит прям круто но также я хочу

поработать над тем чтобы он находился в

абсолютно разной позиция и для этого в

css у кружка у нас стоит свойств а

позиция абсолют то есть мы можем

оперировать там top left right

или базам значит

я создал

x

которая

меняться 150 и константу игре который

будет равняться например 200 то есть

протестируем правильно ли мы складываем

кружочек по координатам здесь мы просто

обращаемся к широкову ставил допустим

топ равняется x

пикселей и на

в только

лифт это у нас параметр который отвечает

за расположение по горизонтали ты здесь

x значит топ это у нас значение y вот он

где находится осталось теперь только

правильно получить эти числа

то есть покажу на всякий случай из идею

вся наша доска у нее размерность 500 на

500 то есть могут быть проблемы если

например y будет равняться 500 или x

будет равняться пятиста таком случае у

нас кружочка не видно потому что он

вышел за границы то есть нам нужно найти

такое рандомное число которая будет

позиционировать кружащих внутри данного

поля и для этого мы можем получить

размерности самого поля

значит

давайте пока назову переменную qqq

сейчас объясню почему если мы обратимся

к борт и здесь вызовем метод который

называется get mounting клиент rect

давайте посмотрим в консоли что такое у

нас qqq

мы видим что

учились здесь объект у которого

присутствует координаты

в полем и

тут присутствует значения h id и выезд

то есть мы можем не записывать прям

числа там 500 в наш код да мы можем

ориентироваться вот реального размера

доске

да даже если мы другие размерности ему

зададим и здесь конкретно я использую

такой синтаксис это называется де

структуризация разумеется более подробно

опять же мы рассказываем это в полном

курсе

сейчас просто покажу идею мы получаем

есть конкретно выезд и height и вот эту

строчку можно убрать и теперь для того

чтобы получить x мы еще раз

воспользуемся функцией get трендом нам

бы только в данном случае мы уже будем

сюда передавать 0 как минимальное

значение и так учитывая что это x то

здесь мы должны работать будет и

значение вы

но опять же потенциально тут может быть

значения 500 то есть для того чтобы сто

процентов кружочек поместился в

квадратик мы здесь вычитаем еще его сайт

и тоже самое делаем для игрека только

здесь он

же значение height и вуаля теперь

кусочек у нас постоянно находится на

доске в принципе эту часть мы закончили

и теперь нам нужно обработать клик по

конкретному кружочку и записать нам

point да за то что мы не по нему попали

для этого

где-нибудь на верху скрипта им там где

добавляю события я добавлю

опять же один слушатель для всей доски

борт et de vent леснер клик и здесь я

получаю

event здесь опять же нам нужно

обработать клик только лишь по кружочку

да они по самой доске

поэтому для начала я напишу проверку что

если event таргет класс лист

принц класс у нас называется цирком если

это правда

чем что нам необходимо сделать нам нужно

увеличить счет нашей игры для этого я

создам переменную

кожа помочь им это будет 0 я здесь

просто напишу

а + +

и нам необходимо убрать этот кружочек по

которому мы кликнули и создать новый то

есть для того чтобы убрать весь опишу

event таргет remove просто здесь должен

быть у нас метод ремус для того чтобы

удалить да сейчас если я нажму ведь он

пропадает in для того чтобы появился

новый кружочек здесь я вызываю

опять crate рэндом 40 он и вуаля вот что

у нас получается то есть видите все

кружочка находится в рамках нашего наши

доски они разного размера мы по ним

успешно кликаем теперь нужно дописать

функцию финиш game для этого в первую

очередь нам необходимо добавить

заголовок который будет говорить о том

что игра закончена и давайте с этого и

начнем все здесь напишу борт и дальше

для того чтобы убрать все кружочки

вообще весь контент который находится

внутри этой доске

я просто запишу в свойства и нарежьте

м.л.

новое значение ну будет мне является

заголовком h1 где не буду сильно

выдумывать напишу давайте просто напишу

здесь ваш счет и сюда я выведу

значения скоро

так давайте

мы не сделаем для того чтобы проще с

этим взаимодействует допустим 1 секунда

вообще

он выглядит не очень впечатляюще

все-таки давайте чтобы было меньше

текста напишем просто счет счет 0 и для

того чтобы подсветить

сам счет эти мы его возьмем волос пан

так мне плагин есть который

является самостоятельно закрытие тегов и

спа ну я добавлю класс праймари вот счет

0 очень почетно получилось также когда

заканчивается игра я хочу скрывать время

для этого у нас есть блок time л

но смотрите здесь есть один маленький

нюанс что если мы напишем допустим time

а у скажу алимов то видите остается

текст осталось чего мы не хотим почему

так происходит вообще потому что time л

на самом деле это у нас span а нам

необходимо удалить его родителя то есть

заголовок h3

поэтому здесь мы можем написать time лпр

and not remove вот видите теперь у нас

это отработало но для того чтобы не было

такого скачка то мы можем вместо метода

remove добавить класс хайд в общем

трения как это будет и окей выглядит так

что мы все закончили теперь нам нужно

только вернуть игру в рабочее состояние

то есть на самом деле убрать здесь дебаг

время поставить по умолчанию 0

и убрать все лишнее классы

но еда

дождаться нашей игрой то есть я нажимаю

начать выбираю допустим 30 секунд мы

полетели

так сколько я за 30 секунд смогут

touchpad набить так

нужно все таки для тасс

ее сократить убирать на 20 секунд но

хотел продемонстрировать именно то что

мы можем действительно разное время

выдрать

так 30 круто

икра rub

как видите здесь в принципе я использую

довольно таки базовые вещи то есть

но ничего сверхестественного принципе мы

про все это уже знали но при этом мы

получили вот такой классный результат

которым вы можете пользоваться и

создавать свои проекты

значит что я попрошу вас сделать в

качестве домашней работы для данного

проекта потому что это будет важно будет

две задачи во первых добавьте сюда еще

одну кнопочку уже с другим временем на

ваше усмотрение и также добавьте

возможность чтобы цвет у кружочка

постоянно менялся вы можете это

посмотреть в прошлых проектах которые мы

делали мы уже делали такой функционал да

и я хочу чтобы каждый раз цвету этого

кружка был разный вот поэтому напишите

пожалуйста этот функционал как сдать

работу на случай если вы забыли мы

обращаемся к нашему сервису джесс виду

нет ни копируем весь наш код который уже

вы получите после выполнения домашней

работы

так давайте еще стиле заберем

значит нажимаю ран

sera

это да и

сейф и вот ваша ссылку который будет

необходимо отправить бота

благодарю за внимание и увидимся с вами

завтра

